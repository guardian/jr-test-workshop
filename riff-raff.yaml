stacks: [playground]
regions: [eu-west-1]
templates:
  jr-test-workshop:
    type: aws-lambda
    app: jr-test-workshop
    contentDirectory: jr-test-workshop
    parameters:
      bucket: gu-jr-microservice-workshop-dist
      functionNames: [jr-test-workshop-]
      fileName:  jr-test-workshop.zip
      prefixStack: false

  deployments:
    jr-test-workshop-upload:
      template: jr-test-workshop
      actions: [uploadLambda]
    jr-microservice-workshop-cfn:
        type: cloud-formation
        app: jr-microservice-workshop
        parameters:
          prependStackToCloudFormationStackName: false
          cloudFormationStackName: jr-microservice-workshop
          templatePath: cfn.yaml
          dependencies: [jr-microservice-upload]
    jr-microservice-lambda-update:
      template: jr-microservice-workshop
      actions: [updateLambda]
      dependencies: [jr-microservice-workshop-cfn]